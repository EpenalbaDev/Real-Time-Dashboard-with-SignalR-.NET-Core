@namespace RealTimeDashboard.Shared.Components
@inject ILocalizationService Loc

<div class="status-indicator">
    <span class="status-dot @DotClass"></span>
    <span>@StatusText</span>
</div>

@code {
    [Parameter, EditorRequired] public ConnectionState State { get; set; }
    [CascadingParameter(Name = "Lang")] public string? Lang { get; set; }

    private string DotClass => State switch
    {
        ConnectionState.Connected => "connected",
        ConnectionState.Reconnecting => "reconnecting",
        _ => "disconnected"
    };

    private string StatusText => State switch
    {
        ConnectionState.Connected => Loc.Get("status.connected"),
        ConnectionState.Reconnecting => Loc.Get("status.reconnecting"),
        ConnectionState.Disconnected => Loc.Get("status.disconnected"),
        ConnectionState.Connecting => Loc.Get("status.connecting"),
        _ => Loc.Get("status.unknown")
    };

    public enum ConnectionState
    {
        Disconnected,
        Connecting,
        Connected,
        Reconnecting
    }
}
